---
layout: post
title: Rules Engines for Business Rules
date: '2008-03-18T13:46:00.001+05:30'
author: Thomas Joseph
tags: 
modified_time: '2008-03-18T14:59:35.897+05:30'
blogger_id: tag:blogger.com,1999:blog-5715425530181339158.post-5103675523191219996
blogger_orig_url: http://tech.ethomasjoseph.com/2008/03/rules-engines-for-business-rules-rules.html
---

<h1>Rules Engines for Business Rules  </h1> <p class="western"><span class="accessibar-span-text">Rules Engines brings agility into business systems by providing way to dynamically change business logic according to the dynamic nature of business. The power of Rules Engines lies in the declarative nature of defining business rules at fly, even without changing the source code of the application.</span></p> <h2>Introduction  </h2> <p class="western"><span class="accessibar-span-text">Business applications often have to deal with changing business requirements that are often unpredictable and inevitable for business. Such changes cannot be even predicted during the system design. The conventional way to handle this situation is to go to the source code where the business logic exists, edit, compile, test and redeploy it; which requires a considerable amount of time and energy apart from the hassles of going through a complete release cycle.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p> <p class="western"><span class="accessibar-span-text">Rules Engine eases out such situation by providing a way, that enables Business Analysts and developers to easily build decision logic based on business needs. Basically a Rules Engine externalizes the application logic from the source, thus enabling the business complex rules to be modified even on the fly, while the application is running.</span></p><h3><span class="accessibar-span-text">Past, Present and Future<br></span></h3> <p class="western"><span class="accessibar-span-text">Rules Engines have existed from long time into the business software systems, but they have been gaining importance just recently, as business applications have started growing to be more complex. Rules Engines exist written in various languages including C/C++, C#(.NET), Java etc. But, of recent times, Rules Engines in Java have gained much importance  with the Open Source wave.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p> <p class="western"><span class="accessibar-span-text">Most of the earlier and legacy rules engines have proprietary API. making them difficult to integrate with applications. If a rule engine is no longer supported and the business decides to adopt another rule engine, most of the application code will need to be rewritten.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p> <p class="western"><span class="accessibar-span-text">JSR 94 is an attempt to standardize rule engine implementations for Java technology. The specification for the </span><a href="http://www.jcp.org/en/jsr/detail?id=94" target="_blank">Java Rule Engine API (JSR 94)</a><span class="accessibar-span-text">, developed through the </span><a href="http://www.jcp.org/" target="_blank">Java Community Process (JCP)</a><span class="accessibar-span-text"> program, defines a Java runtime API for rule engines by providing a simple API to access a rule engine from a Java SE or Java EE platform.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p> <p class="western"><span class="accessibar-span-text">Many Rules Engines exist in the Java World. Many follow the JSR-94 specifications, while some others do not.<br></span></p> <h2>Whats, Whys and Hows of Rules Engines</h2> <h3>What is a Rules Engine?</h3> <p class="western"><span class="accessibar-span-text">The term Rule Engine is quite ambiguous in that it can be any system that uses rules, in any form, that can be applied to data to produce outcomes.</span></p>   <ol><li><p class="western"><span class="accessibar-span-text">A simple system such as the form validation  system can be a rules engine.</span></p>  </li><li><span class="accessibar-span-text">Action classes that we write, which execute  business logic is also a rules engine.</span></li></ol><br> <p class="western"><span class="accessibar-span-text">However, the Rules Engines that we are discussing is a kind of Rules Engine, is also an 'Expert System' and are classically known as “</span><b><span class="accessibar-span-text">Production Rule Systems</span></b><span class="accessibar-span-text">”.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p> <p class="western"><span lang="en"><span class="accessibar-span-text">Please see </span></span><a href="http://en.wikipedia.org/wiki/Production_system"><span lang="en"><span class="accessibar-span-text">http://en.wikipedia.org/wiki/Production_system</span></span></a><span lang="en"><span class="accessibar-span-text"> for a good discussion on it. Production rule system is a computer program typically used to provide some form of artificial intelligence, which consists primarily of a set of rules (also termed as </span><i><span class="accessibar-span-text">productions</span></i><span class="accessibar-span-text">) about behavior.</span></span></p><p class="western"><span lang="en"><span class="accessibar-span-text"><br></span></span></p> <p class="western"><span class="accessibar-span-text"><b><u>Production Rule System </u></b>is a term coined in the literature of <b><u>Artificial Intelligence</u></b>. This is the most common form of architecture used in expert and other types of knowledge based systems. This type of system uses knowledge in the form of production rules, i.e. </span><code><b><span class="accessibar-span-text">if(/when) ... then</span></b> </code><span class="accessibar-span-text">rules.</span></p> <blockquote><pre style="margin-left: 0.49in;"><span class="accessibar-span-text">if (condition-1 and condition-2 and condition-3)</span><br><span class="accessibar-span-text">then: take Action-1</span></pre></blockquote><p class="western"> <span lang="en"><span class="accessibar-span-text">If a production's precondition matches the current state of the world (the working memory), then the production is said to be </span><b><i><span class="accessibar-span-text">triggered</span></i></b><span class="accessibar-span-text">. If a production's action is executed, it is said to have </span><b><i><span class="accessibar-span-text">fired</span></i></b><span class="accessibar-span-text">. A production system also contains a </span><b><span class="accessibar-span-text">working memory</span></b><span class="accessibar-span-text">, which maintains data about current state or knowledge, and a rule interpreter.</span></span></p><p class="western"><span lang="en"><span class="accessibar-span-text"><br></span></span></p> <p class="western"><span class="accessibar-span-text">Each rule represents a small chunk of knowledge relating to the given domain of expertise. When known facts of the system is supplied to such a system, a number of related rules may collectively chain to an inference and lead to some useful conclusions.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p> <p class="western"><span class="accessibar-span-text">The brain of a Production Rules System is an Inference Engine that is able to scale to a large number of rules and facts; the engine is able to schedule many rules that are eligible for execution at the same time through the use of a "</span><b><i><span class="accessibar-span-text">conflict resolution</span></i></b><span class="accessibar-span-text">" strategy.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p><p class="western"><span class="accessibar-span-text">The Rules Engine can be viewed as a sophisticated interpreter of </span><i><span class="accessibar-span-text">if-then</span></i><span class="accessibar-span-text"> statements. The </span><i><span class="accessibar-span-text">if-then</span></i><span class="accessibar-span-text"> statements are the rules. A collection of such rules is what we call a RuleBase. Rules Engine is supplied with facts (data from our application) on which the Engine works, and lead to conclusions. These facts along with the rules together is called as the knowledge base. As rules execute, further knowledge may be added to this knowledge base. The outputs from the Rules Engine are determined by the inputs and may include the original input data objects with modifications, new data objects, and possible side effects (such as sending email to the customer). Sometimes, even some of the originally supplied data may be removed from the output.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p><p class="western"><span class="accessibar-span-text">The results may be used by the client to perform further processing. The rule engine determines when to evaluate each rule based on the input required for the rule as well as the results obtained from the evaluation of previous rules. Dependencies between the rules need not be specified, as they are resolved by the Rules Engine.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p><p class="western"><span class="accessibar-span-text">In addition to all of the industrial uses for rule systems, a handful of communities have begun springing up around rule engine technologies. </span><a href="http://www.javarules.org/">Javarules.org</a><span class="accessibar-span-text"> and </span><a href="http://www.brcommunity.com/index.php">Business Rules Community</a><span class="accessibar-span-text"> are the most notable among them.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p> <p class="western"><span class="accessibar-span-text">In further discussions, we will just deal with the Rules Engine as a Production Rule System.</span></p><h3>When to use Rules Engine?</h3><p class="western"><span class="accessibar-span-text">This is a very important question, when we are considering to use Rules Engine in our application. Is our effort to implement Rules Engine worth the application's need?</span></p><p class="western"><span class="accessibar-span-text"><b>We may consider to use Rules Engine in the following situations:</b></span></p><ol><li>Business logic is too dynamic (changes too often), and a change in a business policy needs to be immediately reflected in the application. Use Rules Engine to manage dynamic business logic and  the task flow</li><li>Business logic is too complicated to be managed at the source code level (source code may have tons of if-else, and switch cases in various nested levels or you are using lots of look-up tables)</li><li>The application in hand may have business rules that needs to change often or needs to change in ways not anticipated in the original design.</li><li>Government regulated business, where a government regulation and norms need to be adhered to immediately. (Telecoms, Banking and Insurance sector for example)</li><li>At the presentation layer to customize the page flow and work flow, as well as to construct custom pages based on session state.</li></ol><p class="western"><br></p><p class="western"><span class="accessibar-span-text"><b>Typical scenarios where Rules Engine are/can be used:</b></span></p><ol><li>Insurance (Rating, Underwriting)</li><li>Financial services (loans, fraud detection, claims routing and management)</li><li>Government (application process and tax calculations)</li><li>Telecoms customer care and billing (promotions for long distance calls that needs to be integrated into the billing system)</li><li>E-commerce (personalizing the user's experience)</li><li>Generic infrastructure for application platforms.</li></ol><br><h3>Why use Rules Engine?</h3><p><span class="accessibar-span-text">We can answer to this question, if we could point out the pros and cons of using a Rules Engine in a project.</span></p><p><b><span class="accessibar-span-text">Advantages</span></b></p><ol><li> Rules separate knowledge from its implementation logic.</li><li>Application logic is externalised from the System logic.</li><li>Business logic can be changed easily and fast (sometimes even while the application is running).</li><li>Rules can be changed without changing source code; thus, there is no need to recompile the application's code.</li><li>Declarative programming model to define business rules</li><ul><li><span class="accessibar-span-text">Like object (OOP) and aspect-oriented programming (AOP), declarative programming is a full-fledged style of software engineering, well suited to a specific branch of software engineering.</span></li></ul><li>Rules that represent business policies are easily communicated and understood. Rules are felt more naturally than many lines of code. Even business peoples can understand these rules (sometimes, with some training).</li><li><p><span style="font-family: Garamond;">Rule engines can also be used to build </span><i style="font-family: Garamond;"><span class="accessibar-span-text">expert systems</span></i>, which may be thought of as large rule banks that are tuned to a specific problem domain, such as workflow automation, resource exploration, or medical diagnosis.</p></li></ol><b><span class="accessibar-span-text">Disadvantages</span><br></b><span class="accessibar-span-text">As with any other tools or technology, using Rules Engine is not without any costs.</span><br><ol><li>The learning curve to get acquainted with Rules Engine, its semantics and possibly its syntax</li><li>Efforts in integrating Rules Engine with our system</li><li>Different Rules Engine implementation have different format and syntax for defining rules. Hence a decision to switch to another Rules Engine implementation would mean the effort to learn yet another tool.</li><li>More the facts and rules to process, the Rules Engine requires as much memory to store them as a knowledge base. As the application logic increases and goes complicated, the memory requirement for the application may also scale up.</li><li>Just like any other part of application, Rules Engine also need that the logic written be tested thoroughly before being moved to production. Using Rules Engine puts a greater emphasis on testing because, a small logic error can have dramatic impact on the business rules.</li></ol><br><span class="accessibar-span-text">(We can go over each of these disadvantages, how we can deal with it)</span><br><br><span class="accessibar-span-text">Then definitely, we need to consider that how much of time and energy will the Rules Engine save. If the application is small, or the change in business logic are predictable and preferably low, then use of a Rules Engine is simply an over head.</span><br><br><span class="accessibar-span-text">However, if we are perfectly decided to use a rules engine, the next question that arises is - </span><i><span class="accessibar-span-text">Which Rules Engine to use</span></i><span class="accessibar-span-text">?. This is what we deal next.</span><br><h3>Which Rules Engine to use?</h3><p class="western"><span class="accessibar-span-text">There are many Rules Engine available in the market today.Most of the rule engines available today loosely implement the JSR 94 specification, providing some commonality to integrating engines from different vendors. Thanks to JSR 94, integrating a rule engine into an application requires very few lines of code. Rules Engines on other platform also exist.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p><p class="western"><span class="accessibar-span-text">Some Open Source Rules Engine are discussed in </span><a title="http://java-source.net/open-source/rule-engines" href="http://java-source.net/open-source/rule-engines" id="cbk7">http://java-source.net/open-source/rule-engines</a><span class="accessibar-span-text">.</span></p><p class="western"><span class="accessibar-span-text"><br></span></p><p class="western"><span class="accessibar-span-text">Below we discuss in brief about various Rules Engines available in market:</span></p><ol><li><b><i><span class="accessibar-span-text">ILOG JRules and Fair Isaac Blaze</span></i></b></li></ol><div style="margin-left: 40px;"><ol><li>Main players in the business Rules Engine market</li><li>Well established user base in Banking and Insurance.</li><li>Offer variety of tools for non-programmers and administrators</li><li>High cost and learning curve</li><li>Best consider for mainline Financial Services and Insurance sectors</li><li><a href="http://www.ilog.com/products/jrules" target="new">www.ilog.com/products/jrules</a> and <a href="http://www.blazesoft.com/" target="new">www.blazesoft.com</a></li></ol></div><ol start="2"><li><p><b><i><span class="accessibar-span-text">WebLogic Personalization Server</span></i></b></p></li></ol><div style="margin-left: 40px;"><ol><li>Bundled with its Portal product</li><li>Not given much importance by the BEA itself</li><li><a href="http://e-docs.bea.com/wlcs/docs20/p13ndev" target="new">http://e-docs.bea.com/wlcs/docs20/p13ndev</a></li></ol></div><ol start="3"><li><p><b><i><span class="accessibar-span-text">Rules4J and Java Expert System Shell (Jess)</span></i></b></p></li></ol><div style="margin-left: 40px;"><ol><li>Emerging players</li><li>Easy to use and inexpensive</li><li>Good capability</li><li>Short learning curve</li><li>Jess is the Reference implementation of Sun's JSR-94.</li><li><a href="http://www.rules4j.com/" target="new">www.rules4j.com</a> and <a href="http://herzberg.ca.sandia.gov/jess" target="new">http://herzberg.ca.sandia.gov/jess</a></li></ol></div><ol start="4"><li><b><i><span class="accessibar-span-text">Drools (JBoss Rules)</span></i></b></li></ol><div style="margin-left: 40px;"><ol><li>Open Source</li><li>Free</li><li>Good Vendor and community support</li><li>Emerging</li><li>Good developments going on</li><li>Powerful yet simple to use</li><li>Shorter learning curve</li><li>JSR-94 compliant</li><li><a title="Lets go here" target="_blank" href="http://www.jboss.com/products/rules" id="trqf">http://www.jboss.com/products/rules</a></li></ol></div><p>  </p><div style="margin-left: 40px;"></div><p>  </p><p class="western"></p> <h2>JSR 94 and Rules Engines</h2><span class="accessibar-span-text">The JSR-94 specification is by no means complete, but it gives client code a unified front end for plugging into different rule engines at runtime. It also supplies a standard way for rule authors and administrators to build and deploy groups of rules in a runtime environment.<br><br></span> <p><span class="accessibar-span-text"> JSR 94 defines a simple API to access a rule engine from a Java SE or Java EE client. It provides APIs to </span></p> <ol><li>Register and unregister rules</li><li>Parse rules</li><li>Inspect rule metadata</li><li>Execute rules</li><li>Retrieve results</li><li>Filter results</li></ol> <p><span class="accessibar-span-text"> Note that JSR 94 does </span><i><span class="accessibar-span-text">not</span></i><span class="accessibar-span-text"> standardize the following: </span></p> <ol><li>The rule engine itself</li><li>The execution flow for rules</li><li>The language used to describe the rules</li><li>The deployment mechanism for Java EE technology</li></ol> <p><span class="accessibar-span-text"> In other words, it doesn't standardize the semantics of rule execution.</span></p><p><span class="accessibar-span-text">JSR 94 provides g</span><font color="#000000"><span class="accessibar-span-text">uidelines for the rule administration and rule runtime APIs, but it defines no guidelines for what language to use to define the rules and actions. Efforts are under way to standardize a common rule language, including the Rule Markup Language (RuleML).</span></font></p><p><font color="#000000"><span class="accessibar-span-text"><br></span></font> </p><p class="western"></p> <p class="western"><span class="accessibar-span-text">For our purpose, though the JSR-94 API are low level APIs and its better to just use some Rules Engine, which confirms to the JSR-94. Though we can use these low level APIs, however, this would make our applications, unnecessarily complicated, if we are concerned just in "</span><i><span class="accessibar-span-text">using</span></i><span class="accessibar-span-text">" the Rules Engine.</span><br></p><h1>Conclusion<br> </h1><p>As we saw already, use of a Rules Engine has got its own advantages and disadvantages. The decision to use it should be taken meticulously. Even more important question is the choice of a rules engine. Weigh your needs and organization goals with what each rules engine has to offer. Nevertheless, considering the Rules Engine as an add-on to your application is always a good consideration to start using Rules Engine in your application so that if it grows complex for the need of rules engine, you may always rely on the intelligence of the Rules Engine.</p><p class="western"><br><br> </p> <p class="western"><br><br> </p><div class="blogger-post-footer">- Thomas Joseph</div>